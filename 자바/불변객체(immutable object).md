  

### 불변객체 : 객체 생성 이후에는 객체의 상태가 바뀌지 않는 객체

>> 최초에 생성된 상태정보들이 바뀌지 않음

ex) employee 객체를 생성했을 때 이름, 나이, 부서 등 내부 정보들이 최초에 생성 된 그 상태를 계속 유지하고 바뀌지 않음

  

### 불변객체의 장점

- 이해하기 쉽고 안정적인 서비스 개발에 도움이 된다.
- map, set, cache에 쓰기에 적절하다.
- (일반적으로) thread-safe 하다

>> thread-safe 즉, race condition(경쟁조건 > 데이터 불일치하는 것)이 발생하지 않을 가능성 높다.

- 불변 객체를 필드로 쓰면 방어적 복사를 할 필요가 없다.

  

### 불변객체 만들기

- 생성자를 제외하고 상태를 바꿀만한 메서드는 모두 제거

ex) setter같은 값을 바꾸는 메서드들

- 클래스의 모든 필드를 private final로 지정
- 자녀 클래스의 메서드 override 금지 즉, 상속 금지

>>class에 final 붙여주기 ex) public final class employee……

- mutable 객체의 레퍼런스(참조) 공유 금지

>> 방어적 복사를 해야한다.

ex)

![[방어적복사.png]]

불변객체인 Person이 참조하는 RGB객체를 그대로 사용하는 것이 아니라

new로 새로 생성해서 현재 객체의 값을 넣어서 사용한다.

즉, 불변객체인 person이 참조하고있는 RGB 객체의 상태값이 바뀌면 person의 상태값도 바뀌기 때문에 RGB를 그대로 참조하는것이 아니라 아예 RGB객체를 새로 만들어서 person 전용 RGB객체를 가지고 있는거임



**출처 : 유튜브 쉬운코드 https://www.youtube.com/@ezcd