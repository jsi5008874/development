  

### 프로그램과 프로세스

프로그램 : 컴퓨터가 실행할 수 있는 명령어들의 집합

프로세스 : 컴퓨터에서 실행중인 프로그램, 각각의 프로세스는 독립된 메모리 공간을 할당 받음

CPU(Central Processing Unit) : 명령어를 실행하는 연산 장치

메인 메모리 : 프로세스가 CPU에서 실행되기 위해 대기하는 곳

IO(Input/Output) : 파일을 읽고 쓰거나 네트워크 어딘가와 데이터를 주고 받는 것

입출력 장치와 데이터를 주거나 받는 것

  

### 단일 프로세스 시스템

정의 : 한번에 하나의 프로세스만 실행 됨

단점 : CPU 사용률이 좋지 않음

ex) P1이라는 프로세스가 CPU에서 실행되고 P1이 I/O작업을 하면 CPU는 놀고있게됨

즉 프로세스를 하나만 실행하면 CPU가 사용되지 않는 시간이 많아짐

  

이 단점에 대한 해결책으로 여러 개의 프로그램을 메모리에 올려놓고 동시에 실행시키자!

IO작업이 발생하면 다른 프로세스가 CPU에서 실행되게 만드는 것임

ex) P1, P2라는 두개의 프로세스가 있고 CPU에 P1이 실행되고 I/O작업에 들어가면

CPU가 놀게되는 그 시간에 P2가 CPU에서 실행되고 P2가 I/o작업에 들어가면 P1이 실행…..

이런식으로 여러 프로세스를 실행, 대기, 실행, 대기를 반복하면서 CPU가 놀게되는 시간을

최소화한다.

### 이런 개념을 **멀티프로그래밍**이라고 한다.

멀티 프로그래밍의 단점은 CPU의 사용 시간이 길어지면 다른 프로세스의 대기시간이 길어진다.

  

이런 단점을 극복하고자 나온 해결책이 프로세스는 한번 CPU를 사용할 때 아주 짧은 시간(quantum)

만 CPU에서 실행되도록 하자! 이다.

ex) 위의 예시에서 보여준 것 처럼 P1, P2의 두개의 프로세스가 실행된다고 가정했을 때

프로세스가 CPU에서 실행되는 시간을 ms(밀리세컨드)단위까지 쪼개서 번갈아가며 실행되게 함

  

### 이런 종류의 시스템을 멀티태스킹이라고 한다.

멀티태스킹은 멀티 프로그래밍과 비슷하지만 시간을 아주 작은단위로 쪼개서 실행하는 차이가 있음

**멀티태스킹의 목적은 프로세스의 응답 시간을 최소화해서 사용자가 동시에 실행되는것 처럼 느껴지게 만드는 것임**

  

멀티태스킹에 남아있는 아쉬운 점

1. 하나의 프로세스가 동시에 여러개의 작업을 할 수 없다.
2. 프로세스의 컨텍스트 스위칭은 무거운 작업이다.

>> 컨텍스트 스위칭 : 위의 예시에서 CPU에서 실행되는 프로세스가 바뀌는 것

1. 프로세스끼리 데이터 공유가 까다로움

>> 프로세스는 각각 독립된 메모리 공간을 차지하고 있어서 데이터 공유가 어려움

1. 듀얼코어가 등장했는데 잘 쓰고 싶음

### 멀티태스킹의 아쉬운점에 대한 해결책이 스레드(thread)

스레드의 특징

1. 프로세스는 한 개 이상의 스레드를 가질 수 있다.

2. CPU에서 실행되는 단위(이전에는 프로세스가 실행되는 단위였다면 스레드로 바뀜)

1. 같은 프로세스의 스레드들끼리 컨텍스트 스위칭이 가볍다.
2. 스레드들은 자신들이 속한 프로세스의 메모리 영역을 공유

>> 3, 4번은 연관이 되어있는데 같은 프로세스에 속한 스레드들은 같은 메모리에 속해 있어서

상호간에 데이터공유가 쉽다.

하지만 스레드들만의 고유 영역도 있다. stack영역과 Code영역의 program counter(다음순번에 실행되야할 명령어들의 메모리주소를 가르키는 것)은 스레드별 고유한 영역을 가지고 힙과 나머지 부분은 공유한다.

  

이렇게 여러개의 스레드를 가진 프로세스가 동작하는 방식은

T1, T2스레드를 가진 프로세스가 듀얼코어 CPU에서 실행이된다면

T1은 core1에서 실행되고 T2는 core2에서 실행된다.

즉 진정한 동시실행이 되는 것이다.

### 이런 개념이 멀티스레딩(여러개의 스레드가 실행)이다.

멀티스레딩은 하나의 프로세스가 동시에 여러 작업을 실행하는것이다.

  

이러한 스레드의 등장으로 확장된 멀티태스킹의 개념이 생겼다.

>> 여러 프로세스와 여러 스레드가 아주 짧게 쪼개진 cpu time을 나눠 갖는 것

  

### 멀티 프로세싱

두 개 이상의 프로세스나 코어를 활용하는 시스템

  

정리를 하자면

멀티태스킹은 한개의 CPU 코어에서 여러개의 프로세스나 스레드가 실행되는 것

멀티스레딩은 여러개의 스레드가 CPU 코어에서 실행되는것

멀티프로세싱은 여러 개의 프로세스에 속한 여러 개의 스레드들이 듀얼 이상의 코어에서 실행되는 것

  

### 이 페이지에 해당되는 스레드는 OS 레벨의 스레드임

  

[[컨텍스트 스위칭]]